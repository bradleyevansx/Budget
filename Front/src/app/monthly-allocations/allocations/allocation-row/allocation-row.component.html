<li
  class="grid grid-cols-1 md:grid-cols-4 cursor-pointer"
  (click)="showDialog()"
>
  <div class="w-60 md:w-full overflow-hidden">
    <span
      class="text-surface-900 dark:text-surface-0 font-medium mr-2 mb-1 md:mb-0"
      >{{ allocationName }}</span
    >
    <div class="mt-1 text-muted-color">{{ allocationAmount }}</div>
  </div>
  <div
    *ngFor="let stat of currStats"
    class="truncate w-fit text-muted-color text-sm md:w-full overflow-hidden"
  >
    <div
      class="hover:bg-surface-50 w-fit max-w-full px-2 py-1 rounded-2xl"
      (click)="handleStatClick($event, stat)"
    >
      <span class="truncate text-muted-color-emphasis w-fit">{{ stat }}:</span>
      <div class="truncate">{{ statsMap[stat] }}</div>
    </div>
  </div>

  <div class="mt-2 md:mt-0 flex items-center md:w-full overflow-hidden">
    <div
      class="bg-surface-300 dark:bg-surface-500 rounded-border overflow-hidden w-40 lg:w-24 md:w-full"
      style="height: 8px"
    >
      <div
        [ngClass]="bgColor"
        class="h-full"
        [style.width.%]="percentUsed"
      ></div>
    </div>
    <span
      [ngClass]="textColor"
      class="ml-4 font-medium cursor-pointer px-2 rounded-full whitespace-nowrap"
      (click)="togglePercentOrTotals($event)"
    >
      {{ displayString }}
    </span>
  </div>
</li>

<app-allocation
  [(visible)]="visible"
  [allocation]="allocation"
></app-allocation>
